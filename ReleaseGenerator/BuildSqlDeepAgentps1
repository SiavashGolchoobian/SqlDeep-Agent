function Remove-AuthenticodeSignature {
    param (
        [string]$Path
    )

    $fileContent = Get-Content $Path
    $signatureLine = $fileContent | Select-String "SIG # Begin signature block"

    if ($null -eq $signatureLine) {
        Write-Host "No signature block found in file: $Path"
        return
    }

    $lineNumber = $signatureLine.LineNumber - 2
    $newContent = $fileContent[0..$lineNumber]
    $newContent | Set-Content $Path
}
Remove-Item ..\GUI\bin\ -Recurse -Force
Remove-Item ..\GUI\SqlDeepAgentGUI.exe
Remove-AuthenticodeSignature -Path ..\CLI\SqlDeepAgent.psm1
Merge-Script -Script ..\GUI\SqlDeepAgentGUI.ps1 -Bundle -OutputPath ..\GUI\SqlDeepAgentGUIBundle.ps1 -Verbose
Merge-Script -ConfigFile ..\GUI\SqlDeepAgentGUIBundle.psd1 -Verbose -Debug
<#

--Remove any signe from SqlDeepAgent.psm1 manually
--Then bundle all scripts in a single one with bellow command
Merge-Script -Script .\SqlDeepAgentGUI.ps1 -Bundle -OutputPath .\Release\ -Verbose
--Finally package (make exe file) from above single bundled files with bellow command
Merge-Script -ConfigFile .\SqlDeepAgentGUI.psd1 -Verbose -Debug
#>